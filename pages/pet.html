<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Pet - Meu Petshop</title>
    <link rel="icon" href="../assets/dog.png" />
    <link rel="stylesheet" href="../css/style.css">
    <script src="../script/script.js" defer></script>
</head>

<body>
    <!-- Header e Navbar incluem via script.js -->


    <div class="container">
        <div id="header"></div>
        <div id="navbar"></div>

        <main>
            <section>
                <h3 class="service-title">Cadastre seu Pet</h3>
                <form id="form-pet-register" enctype="multipart/form-data">
                    <label for="pet-name">Nome do Pet</label>
                    <input type="text" id="pet-name" name="name" placeholder="Ex: Rex" required>

                    <label for="pet-species">Espécie</label>
                    <select id="pet-species" name="species" required>
                        <option value="">Selecione...</option>
                        <option value="Cão">Cão</option>
                        <option value="Gato">Gato</option>
                        <option value="Pássaro">Pássaro</option>
                        <option value="Outro">Outro</option>
                    </select>

                    <label for="pet-breed">Raça</label>
                    <input type="text" id="pet-breed" name="breed" placeholder="Ex: SRD, Labrador" required>

                    <label for="pet-age">Idade (anos)</label>
                    <input type="number" id="pet-age" name="age" min="0" step="0.1" placeholder="Ex: 2.5" required>

                    <label>Sexo</label>
                    <div class="radio-group">
                        <label><input type="radio" name="gender" value="Macho" required> Macho</label>
                        <label><input type="radio" name="gender" value="Fêmea"> Fêmea</label>
                    </div>

                    <label for="pet-birthdate">Data de Nascimento</label>
                    <input type="date" id="pet-birthdate" name="birthdate">

                    <label for="pet-photo">Foto do Pet</label>
                    <input type="file" id="pet-photo" name="photo" accept="image/*">

                    <label for="owner-name">Nome do Dono</label>
                    <input type="text" id="owner-name" name="ownerName" placeholder="Seu nome" required>

                    <label for="owner-contact">Contato do Dono</label>
                    <input type="tel" id="owner-contact" name="ownerContact" placeholder="(xx) xxxx-xxxx" required>

                    <button type="submit">Cadastrar Pet</button>
                </form>
    </div>
    </section>
    </main>


    <script>
        // Lógica de envio via AJAX (fetch)
        document.getElementById('form-pet-register').addEventListener('submit', async function (e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);

            try {
                const res = await fetch('/api/pets', {
                    method: 'POST',
                    body: formData
                });
                const json = await res.json();
                if (res.ok) {
                    alert('Pet cadastrado com sucesso!');
                    form.reset();
                } else {
                    alert('Erro: ' + (json.error || 'Não foi possível cadastrar.'));
                }
            } catch (err) {
                console.error(err);
                alert('Erro de conexão, tente mais tarde.');
            }
        });
    </script>
</body>

</html>